# 题目

> 考虑差分方程𝑝[𝑛] = 𝑝[𝑛 -1] + 𝑟𝑝[𝑛 -1] - 𝑋，其中𝑝[𝑛]是在时间𝑛的还贷本金， 𝑟是还贷周期的利率， 𝑋是周期贷款还款额。
> 
> 1、假定你想要买一幢房子，需要向银行贷款 50 万人民币，在𝑛 = 60, 72, . . . , 360个月，年利率分别为 5％， 6％， ……, 30％，试编程绘制𝑋对𝑛的趋势图形，并计算在 30 年内总共付给银行的金额是多少？
> 
> 2、假定你想要一笔与 1 中相同的贷款额，若打算在 15 年内还清贷款，年利率为 8％，每月应该还贷多少？总共付给银行的金额是多少？

# 题解

$$
p[n]:时间n的还贷本金\\
r:还贷周期利率\\
X:周期贷款还款额\\
A:总贷款额
$$

**求通解法**

$$
p[n]-(1+r)p[n-1]=-X\\
设特征根为\lambda^n,代入\\
p[n]-(1+r)p[n-1]=0,得\\
\lambda^n-(1+r)\lambda^{n-1}=0\\
求得特征根\lambda_1=1+r,\lambda_2=0\\
其次解为C(1+r)^n\\
设特解为K,带入方程,得\\
K-(1+r)K=-X,解得K={X \over r}\\
假设全部贷款额为A,由题意知,p[0]=A\\
将p[0]=A带入通解,得C+{X \over A}=A,解得C=A-{x\over r}\\
因此,通解p[n]={Ar(1+r)^n+X[1-(1+r)^n] \over r}\\
假设时间n还清贷款,由题意得p[n]=0\\
所以{Ar(1+r)^n+X[1-(1+r)^n] \over r}=0,解得\\
X={Ar(1+r)^n \over (1+r)^n-1}
$$

**递推解法**

$$
假设时间n还清贷款,由题意得\\
p[n]=(1+r)p[n-1]-X=0\\
p[n-1]=(1+r)p[n-2]-X\\
p[n-2]=(1+r)p[n-3]-X\\
...\\
p[0]=A\\
将以上式子回代,得\\
p[n]=(1+r)^np[0]-X[1+(1+r)+...+(1+r)^{n-1}]\\
p[n]=A(1+r)^n-{X[1-(1+r)^n] \over 1-(1+r)}=0,解得\\
X={Ar(1+r)^n \over (1+r)^n-1}\\
$$
